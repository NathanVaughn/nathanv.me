{{ $id := cond (ne .position "") (print .position "-" .company) (.company) }}
<a id="{{ anchorize $id }}" class="anchor scrollspy"></a>
<li>
    <div class="collapsible-header">
        <div class="position-logo-wrapper valign-wrapper">
            {{ partial "macros/lazyimage.html" (dict "link" .logo "classes" "lazypreload position-logo" "title" .company) }}
        </div>
        <div class="position-info-wrapper">
            {{ if .position }}
            <div class="position-title">{{ .position }}</div>
            {{ end }}
            <div class="position-company">
                {{ if .website }}
                <a href="{{ .website }}" rel="noreferrer" target="_blank">{{ .company }}</a>
                {{ else }}
                    {{ if .position }}
                    <span>{{ .company }}</span>
                    {{ else }}
                    <p><b>{{ .company }}</b></p>
                    {{ end }}
                {{ end }}
            </div>
        </div>
        <div class="position-dates right-align">{{ .dates }}</div>
    </div>
    {{ if .content }}
    <div class="collapsible-body white">
        {{ .content | markdownify }}
    </div>
    {{ end }}
</li>